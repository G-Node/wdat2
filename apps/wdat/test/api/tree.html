<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tree Test</title>
<style type="text/less">
  @import "../../src/api/less/utils.less";
  @import "../../src/api/less/base.less";
  @import "../../src/api/less/tree.less";
  @import "../../src/api/less/button.less";
</style>
<script type="text/javascript" src="http://lesscss.googlecode.com/files/less-1.3.0.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="../../src/api/event_bus.js"></script>
<script type="text/javascript" src="../../src/api/button.js"></script>
<script type="text/javascript" src="../../src/api/tree.js"></script>
<script type="text/javascript">
  var init = function() {
    var bus = new WDAT.api.EventBus(); 
    var tree = new WDAT.api.VTree($('#tree-1'), bus, ['del', 'sel', 'edit', 'add', 'more']);
    bus.subscribe(tree.events.sel, tree.selectHandler());
    bus.subscribe(tree.events.more, tree.expandHandler());
    bus.subscribe(tree.events.del, tree.removeHandler());
    bus.subscribe(tree.events.edit, tree.editHandler());
    bus.subscribe(tree.events.add, function(event, data) {
      var elem = {name: 'Test Node', type: 'section'};
      tree.add(elem, data);
    });
    var n = tree.add({name: 'root-01', type: 'section'});
    n = tree.add({name: 'root-01-child01', type: 'section'}, n);
    tree.add({name: 'root-01-child01-child01', type: 'section'}, n, true);
    tree.add({name: 'root-01-child01-child02', type: 'section'}, n, true);
    tree.add({name: 'root-02', type: 'section'});
  };
  $(window).load(init);
</script>
</head>
<body>
  <h1>Tree Test</h1>
  <div id="tree-1"></div>
  <div class="event-log"></div>
</body>
</html>

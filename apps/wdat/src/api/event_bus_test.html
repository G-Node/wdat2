<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>EventBus Test</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="event_bus.js"></script>
<script type="text/javascript">
   var init = function() {
	   var bus = new wdat.api.EventBus();
	   var log = $(".event-log").first();

	   var fn = function(event, args){ log.append("<p>event fired: " + args + "</p>"); };
	   
	   var uid = bus.uid();
	   bus.subscribe("foo", fn, uid);
	   $(".event-1").first().click(function() { bus.publish("foo", "event 1 data", uid);});
	   
	   uid = bus.uid();
	   bus.subscribe("foo", fn, uid);
	   $(".event-2").first().click(function() { bus.publish("foo", "event 2 data", uid);});
   };
   $(window).load(init);
</script>
</head>
<body>
   <h1>EventBus Test</h1>
   <div>
      <a href="#" class="event-1">Event 1</a> |
      <a href="#" class="event-2">Event 2</a>
   </div>
   <div class="event-log">
   </div>
</body>
</html>

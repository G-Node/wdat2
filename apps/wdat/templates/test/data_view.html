{% extends "test/test_base.html" %}

{% block title %}DataView Test{% endblock %}

{% block extra_script %}
<script type="text/javascript">
  var init = function() {
    var bus = new WDAT.api.EventBus();
    var api = new WDAT.api.DataAPI('NetworkResource', 'ResourceAdapter', bus);
    var datv = new WDAT.app.DataView($('#datv-01'), bus)

    /* Create section form and edit a selectable section */
    var btn_section  = $("#btn-section").button({text: true});
    btn_section.click( function() {
      console.log('REQUEST data: ' + id);
    });
    var buffer = {};
    var reqcount = 0;
    bus.subscribe('get-data', handleRequestEvents);
    function handleRequestEvents(event, data) {
      var ev = event.type;
      console.log('EVENT: ' + ev + ';COUNT: ' + reqcount + '; EVENT DATA: ' + JSON.stringify(data.response));

    }
  };
  $(window).load(init);
</script>
{% endblock %}

{% block body %}
<h1>Data View Test</h1>
<div>
  <button id="btn-section">Show Section</button>
  <span>/metadata/section/</span>
  <input type="text" value="1" id="input-section">
</div>
<div id="datv-01" style="border: 1px solid grey"></div>
<div class="event-log"></div>
{% endblock %}

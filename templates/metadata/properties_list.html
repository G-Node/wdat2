{% load i18n %}

{% if section %}
    {% if section.hasChild %}
    {% if section.getActiveProperties %}
        <h3 style="margin:0; padding: 10px 10px 10px 0px">{% trans "Properties" %}</h3>
        <table class="messages">
            <thead>
                <tr><th>{% trans "Name" %}</th><th>{% trans "Value" %}</th><th>{% trans "Description" %}</th><th>{% trans "Comment" %}</th>
                    {% ifequal section.get_owner request.user %}
                    <th>{% trans "Action" %}</th>
                    {% endifequal %}
                </tr>
            </thead>
            <tbody>
                {% for property in section.getActiveProperties %}
                    <tr>
                        <td><a href="#" alt="{{ property.prop_name_definition }}" title="{{ property.prop_name_definition }}">{{ property.prop_title }}</a></td>
                        <td>{{ property.prop_value }}</td>
                        <td>{{ property.prop_description }}</td>
                        <td>{{ property.prop_comment }}</td>
                        {% ifequal section.get_owner request.user %}
                            <td><nobr><a href="#" onclick="edit_property({{ property.id }}, 'get')">{% trans "edit" %}</a> <a 
                                href="#" onclick="delete_property({{ property.id }})">{% trans "delete" %}</a></nobr></td>
                        {% endifequal %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}

    {% if section.getActiveDatasets %}
        <h3 style="margin:0; padding: 10px 10px 10px 0px">{% trans "Datasets" %}</h3>
        <table class="messages">
            <thead>
                <tr><th>{% trans "Title" %}</th><th>{% trans "Date created" %}</th><th>{% trans "Objects" %}</th><th>{% trans "State" %}</th>
                    {% ifequal section.get_owner request.user %}
                    <th>{% trans "Action" %}</th>
                    {% endifequal %}
                </tr>
            </thead>
            <tbody>
                {% for dataset in section.getActiveDatasets %}
                    <tr>
                        <td><a href="{{ dataset.get_absolute_url }}">{{ dataset.title }}</a></td>
                        <td>{{ dataset.date_added }}</td>
                        <td>{{ dataset.objects_count_str }}</td>
                        <td>{% if dataset.is_Public %}<b style="color: red">Public</b>{% endif %}{% if dataset.is_Friendly %}Friendly{% endif %}{% if dataset.is_Private %}Private{% endif %}</td>
                        {% ifequal dataset.owner request.user %}
                            <td><nobr><a href="#" onclick="remove_object({{ section.id }}, {{ dataset.id }}, 'dataset')">{% trans "remove" %}</a></nobr></td>
                        {% endifequal %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}

    {% if section.getActiveDatafiles %}
        <h3 style="margin:0; padding: 10px 10px 10px 0px">{% trans "Datafiles" %}</h3>
        <table class="messages">
            <thead>
                <tr><th>{% trans "Title" %}</th><th>{% trans "Date recorded" %}</th><th>{% trans "Size" %}</th><th>{% trans "State" %}</th>
                    {% ifequal section.get_owner request.user %}
                    <th>{% trans "Action" %}</th>
                    {% endifequal %}
                </tr>
            </thead>
            <tbody>
                {% for datafile in section.getActiveDatafiles %}
                    <tr>
                        <td><a href="{{ datafile.get_absolute_url }}">{{ datafile.title }}</a></td>
                        <td>{{ datafile.date_added }}</td>
                        <td>{{ datafile.size }}</td>
                        <td>{% if datafile.is_Public %}<b style="color: red">Public</b>{% endif %}{% if datafile.is_Friendly %}Friendly{% endif %}{% if datafile.is_Private %}Private{% endif %}</td>
                        {% ifequal datafile.owner request.user %}
                            <td><nobr><a href="#" onclick="remove_object({{ section.id }}, {{ datafile.id }}, 'datafile')">{% trans "remove" %}</a></nobr></td>
                        {% endifequal %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}

    {% if section.getActiveTimeSeries %}
        <h3 style="margin:0; padding: 10px 10px 10px 0px">{% trans "Time Series Data" %}</h3>
        <table class="messages">
            <thead>
                <tr><th>{% trans "Title" %}</th><th>{% trans "Date recorded" %}</th><th>{% trans "Type" %}</th><th>{% trans "State" %}</th>
                    {% ifequal section.get_owner request.user %}
                    <th>{% trans "Action" %}</th>
                    {% endifequal %}
                </tr>
            </thead>
            <tbody>
                {% for serie in section.getActiveTimeSeries %}
                    <tr>
                        <td><a href="{{ serie.get_absolute_url }}">{{ serie.title }}</a></td>
                        <td>{{ serie.date_created }}</td>
                        <td>{% ifequal serie.data_type 10 %}ANALOG{% endifequal %}{% ifequal serie.data_type 20 %}SPIKE{% endifequal %}</td>
                        <td>{% if serie.is_Public %}<b style="color: red">Public</b>{% endif %}{% if serie.is_Friendly %}Friendly{% endif %}{% if serie.is_Private %}Private{% endif %}</td>
                        {% ifequal serie.owner request.user %}
                            <td><nobr><a href="#" onclick="remove_object({{ section.id }}, {{ serie.id }}, 'timeseries')">{% trans "remove" %}</a></nobr></td>
                        {% endifequal %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}

    {% else %}
        <span><br>This section is empty.<br>Please use the navigation above to add new properties or link objects.</span>
    {% endif %}
{% endif %}
